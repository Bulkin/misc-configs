#!/bin/sh

#FONT='-xos4-terminus-medium-*-normal-*-14-*-*-*-*-*-*-*'
#FONT='Terminus-12:normal'
FONT='xos4 Terminus-12:normal'
MAX_AGE=3600
PROGSFILE=/var/tmp/prog_names

proglist() {
	paths=$(echo "$@" | sed 'y/:/ /')
	ls -lL $paths 2>/dev/null \
		| awk '$1 ~ /^[^d].*x/ && NF > 2 { print $NF }' \
		| sort | uniq
}

# if proglist doesn't exist -- create it
if [ ! -f $PROGSFILE ] ; then
	proglist $PATH >$PROGSFILE
fi

PROG=`dmenu  -fn "$FONT" -nf '#888888' -nb '#222222' -sf '#ffffff' -sb '#285577' < $PROGSFILE`
$PROG &

~/bin/update_progs_file &
